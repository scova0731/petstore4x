@*<%--*@

@*Copyright 2010-2016 the original author or authors.*@

@*Licensed under the Apache License, Version 2.0 (the "License");*@
@*you may not use this file except in compliance with the License.*@
@*You may obtain a copy of the License at*@

@*http://www.apache.org/licenses/LICENSE-2.0*@

@*Unless required by applicable law or agreed to in writing, software*@
@*distributed under the License is distributed on an "AS IS" BASIS,*@
@*WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.*@
@*See the License for the specific language governing permissions and*@
@*limitations under the License.*@

@*--%>*@
@import java.text.DecimalFormat
@import java.time.format.DateTimeFormatter
@import com.github.scova0731.petstore4s.step1.domain.Order
@import com.github.scova0731.petstore4s.step1.views.html.common.IncludeTop
@import com.github.scova0731.petstore4s.step1.views.html.common.IncludeBottom
@import com.github.scova0731.petstore4s.step1.web.action.routes

@(order: Order)(implicit messages: Messages, session: Session, flash: Flash)

@IncludeTop()

<div id="BackLink">
	@*<stripes:link*@
	@*beanclass="org.mybatis.jpetstore.web.actions.CatalogActionBean">*@
	@*Return to Main Menu</stripes:link>*@
	<a href="@routes.CatalogActionBean.main()">Return to Main Menu</a>
</div>

<div id="Catalog">

<table>
	<tr>
		<th align="center" colspan="2">
			Order #${actionBean.order.orderId}
			@*<fmt:formatDate value="${actionBean.order.orderDate}" pattern="yyyy/MM/dd hh:mm:ss" />*@
			@order.orderDate.format(DateTimeFormatter.ofPattern("yyyy/MM/dd hh:mm:ss"))
		</th>
	</tr>
	<tr>
		<th colspan="2">Payment Details</th>
	</tr>
	<tr>
		<td>Card Type:</td>
		<td>
			@*<c:out value="${actionBean.order.cardType}" />*@
			@order.cardType
		</td>
	</tr>
	<tr>
		<td>Card Number:</td>
		<td>
			@*<c:out value="${actionBean.order.creditCard}" /> * Fake number!*@
			@order.creditCard * Fake number!
		</td>
	</tr>
	<tr>
		<td>Expiry Date (MM/YYYY):</td>
		<td>
			@*<c:out value="${actionBean.order.expiryDate}" />*@
			@order.expiryDate
		</td>
	</tr>
	<tr>
		<th colspan="2">Billing Address</th>
	</tr>
	<tr>
		<td>First name:</td>
		<td>
			@*<c:out value="${actionBean.order.billToFirstName}" />*@
			@order.billAddress.toFirstName
		</td>
	</tr>
	<tr>
		<td>Last name:</td>
		<td>
			@*<c:out value="${actionBean.order.billToLastName}" />*@
			@order.billAddress.toLastName
		</td>
	</tr>
	<tr>
		<td>Address 1:</td>
		<td>
			@*<c:out value="${actionBean.order.billAddress1}" />*@
			@order.billAddress.address1
		</td>
	</tr>
	<tr>
		<td>Address 2:</td>
		<td>
			@*<c:out value="${actionBean.order.billAddress2}" />*@
			@order.billAddress.address2
		</td>
	</tr>
	<tr>
		<td>City:</td>
		<td>
			@*<c:out value="${actionBean.order.billCity}" />*@
			@order.billAddress.city
		</td>
	</tr>
	<tr>
		<td>State:</td>
		<td>
			@*<c:out value="${actionBean.order.billState}" />*@
			@order.billAddress.state
		</td>
	</tr>
	<tr>
		<td>Zip:</td>
		<td>
			@*<c:out value="${actionBean.order.billZip}" />*@
			@order.billAddress.zip
		</td>
	</tr>
	<tr>
		<td>Country:</td>
		<td>
			@*<c:out value="${actionBean.order.billCountry}" />*@
			@order.billAddress.country
		</td>
	</tr>
	<tr>
		<th colspan="2">Shipping Address</th>
	</tr>
	<tr>
		<td>First name:</td>
		<td>
			@*<c:out value="${actionBean.order.shipToFirstName}" />*@
			@order.shipAddress.toFirstName
		</td>
	</tr>
	<tr>
		<td>Last name:</td>
		<td>
			@*<c:out value="${actionBean.order.shipToLastName}" />*@
			@order.shipAddress.toLastName
		</td>
	</tr>
	<tr>
		<td>Address 1:</td>
		<td>
			@*<c:out value="${actionBean.order.shipAddress1}" />*@
			@order.shipAddress.address1
		</td>
	</tr>
	<tr>
		<td>Address 2:</td>
		<td>
			@*<c:out value="${actionBean.order.shipAddress2}" />*@
			@order.shipAddress.address2
		</td>
	</tr>
	<tr>
		<td>City:</td>
		<td>
			@*<c:out value="${actionBean.order.shipCity}" />*@
			@order.shipAddress.city
		</td>
	</tr>
	<tr>
		<td>State:</td>
		<td>
			@*<c:out value="${actionBean.order.shipState}" />*@
			@order.shipAddress.state
		</td>
	</tr>
	<tr>
		<td>Zip:</td>
		<td>
			@*<c:out value="${actionBean.order.shipZip}" />*@
			@order.shipAddress.zip
		</td>
	</tr>
	<tr>
		<td>Country:</td>
		<td>
			@*<c:out value="${actionBean.order.shipCountry}" />*@
			@order.shipAddress.country
		</td>
	</tr>
	<tr>
		<td>Courier:</td>
		<td>
			@*<c:out value="${actionBean.order.courier}" />*@
			@order.courier
		</td>
	</tr>
	<tr>
		<td colspan="2">
			@*Status: <c:out value="${actionBean.order.status}" />*@
				Status: @order.status
		</td>
	</tr>
	<tr>
		<td colspan="2">
		<table>
			<tr>
				<th>Item ID</th>
				<th>Description</th>
				<th>Quantity</th>
				<th>Price</th>
				<th>Total Cost</th>
			</tr>
			@*<c:forEach var="lineItem" items="${actionBean.order.lineItems}">*@
				@for(lineItem <- order.lineItems) {
				<tr>
					<td>
						@*<stripes:link*@
							@*beanclass="org.mybatis.jpetstore.web.actions.CatalogActionBean"*@
							@*event="viewItem">*@
							@*<stripes:param name="itemId" value="${lineItem.item.itemId}" />*@
							@*${lineItem.item.itemId}*@
						@*</stripes:link>*@
						<a href="@routes.CatalogActionBean.viewItem(lineItem.item.itemId)">@lineItem.item.itemId</a>
						</td>
					<td>
						@*<c:if test="${lineItem.item != null}">*@
							@*${lineItem.item.attribute1}*@
							@*${lineItem.item.attribute2}*@
							@*${lineItem.item.attribute3}*@
							@*${lineItem.item.attribute4}*@
							@*${lineItem.item.attribute5}*@
							@*${lineItem.item.product.name}*@
						@*</c:if>*@
						@*<c:if test="${lineItem.item == null}">*@
							@*<i>{description unavailable}</i>*@
						@*</c:if>*@
						@if(lineItem.item != null) {
							@lineItem.item.attribute1 @lineItem.item.attribute2 @lineItem.item.attribute3
							@lineItem.item.attribute4 @lineItem.item.attribute5 @lineItem.item.product.name
						} else {
							<i>description unavailable</i>
						}
					</td>
					<td>
						${lineItem.quantity}
					</td>
					<td>
						@*<fmt:formatNumber value="${lineItem.unitPrice}" pattern="$#,##0.00" />*@
						@(new DecimalFormat("$#,##0.00").format(lineItem.unitPrice))
					</td>
					<td>
						@*<fmt:formatNumber value="${lineItem.total}" pattern="$#,##0.00" />*@
						@(new DecimalFormat("$#,##0.00").format(lineItem.total))
					</td>
				</tr>
			@*</c:forEach>*@
			}
			<tr>
				<th colspan="5">
					@*Total: <fmt:formatNumber value="${actionBean.order.totalPrice}" pattern="$#,##0.00" />*@
					Total: @(new DecimalFormat("$#,##0.00").format(order.totalPrice))
				</th>
			</tr>
		</table>
		</td>
	</tr>

</table>

</div>

@IncludeBottom()
